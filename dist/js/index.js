require(["config"],function(){require(["jquery","jquery-cookie","html5","transform","lazyload","scroll","dragBox"],function(e){e(function(){function a(){e("img.lazy").lazyload({placeholder:"img/grey.gif",effect:"fadeIn",threshold:200})}require(["header","search","nav","footer_index","copy","aside"]),function(){var a=e("<ol></ol>");a.appendTo(e(".banner")),a.css({position:"absolute",bottom:"20px",left:"50%"}),e.each(e(".banner ul li"),function(t,l){var s=e("<li></li>");s.appendTo(a),0==t&&s.addClass("active"),s.css({width:"10px",height:"10px",backgroundColor:"#fff",borderRadius:"50%",marginLeft:"30px",float:"left"}),s.on("mouseenter click",function(){i=e(this).index(),e(this).addClass("active").siblings().removeClass("active"),e(".banner ul li").eq(e(this).index()).fadeIn(1e3).siblings().fadeOut(1e3)})});var i=0,t=null;function l(){t=setInterval(function(){i++,e(".banner ol li").eq(i%e(".banner ol li").length).addClass("active").siblings().removeClass("active"),e(".banner ul li").eq(i%e(".banner ul li").length).fadeIn(1e3).siblings().fadeOut(1e3)},2e3)}l(),e(".banner").on("mouseenter",function(){clearInterval(t)}).on("mouseleave",function(){l()})}(),e.ajax({url:"../server/php/group.php",dataType:"json"}).then(function(a,i,t){for(var l=a,s=new Date(t.getResponseHeader("date")),n=0;n<l.length;n++){var o=(f=new Date(l[n].time).getTime()-s.getTime())<0?0:1,c=f<0?"--":parseInt(f/1e3)%60,r=f<0?"--":parseInt(f/1e3/60)%60,p=f<0?"--":parseInt(f/1e3/60/60)%24,d=f<0?"--":parseInt(f/1e3/60/60/24);e('<li class="clearfix goods"><div class="left"><p class="goodsName">'+l[n].name+'</p><p class="goodsDetails">'+l[n].msg+'</p><p class="goodsPrice"><i>￥</i><span>'+l[n].price+'</span></p><p class="goodsTime" data-time="'+f+'" data-flag="'+o+'"> <span>剩余: </span><i>'+d+"</i>天<i>"+p+"</i>小时<i>"+r+"</i>分<i>"+c+'</i>秒</p></div><div class="right"><img src="'+l[n].img+'" alt=""></div><div class="slide"><div class="slide_left"><img src="'+l[n].img+'" alt=""><ol><li><a href="#">评测</a>|</li><li><a href="#">视频</a>|</li><li><a href="#">点评</a></li></ol></div><div class="slide_right"><p class="slide_name" >'+l[n].name+'</p><p class="slide_price" >团购价：<span>¥'+l[n].price+'</span></p><p class="slide_reference_price" >电商参考价：<span>¥'+l[n].price2+'</span></p><a href="#" class="slide_toPay">去团购</a></div></div></li>').appendTo(e(".group_lunbo ul"))}for(n=0;n<3;n++){var f;o=(f=new Date(l[n].time).getTime()-s.getTime())<0?0:1,e('<li class="clearfix goods"><div class="left"><p class="goodsName">'+l[n].name+'</p><p class="goodsDetails">'+l[n].msg+'</p><p class="goodsPrice"><i>￥</i><span>'+l[n].price+'</span></p><p class="goodsTime" data-time="'+f+'" data-flag="'+o+'"><span>剩余: </span><i>'+d+"</i>天<i>"+p+"</i>小时<i>"+r+"</i>分<i>"+c+'</i>秒</p></div><div class="right"><img src="'+l[n].img+'" alt=""></div><div class="slide"><div class="slide_left"><img src="'+l[n].img+'" alt=""><ol><li><a href="#">评测</a>|</li><li><a href="#">视频</a>|</li><li><a href="#">点评</a></li></ol></div><div class="slide_right"><p class="slide_name" >'+l[n].name+'</p><p class="slide_price" >团购价：<span>¥'+l[n].price+'</span></p><p class="slide_ reference_price" >电商参考价：<span>¥'+l[n].price2+'</span></p><a href="#" class="slide_toPay">去团购</a></div></div></li>').appendTo(e(".group_lunbo ul"))}for(setInterval(function(){for(var a=0;a<e("[data-flag='1']").length;a++){var i=e("[data-flag='1']").eq(a).data("time");i-=1e3,e("[data-flag='1']").eq(a).data("time",i),i<0&&e("[data-flag='1']").eq(a).data("flag",0);var t=i<0?"--":parseInt(i/1e3)%60,l=i<0?"--":parseInt(i/1e3/60)%60,s=i<0?"--":parseInt(i/1e3/60/60)%24,n=i<0?"--":parseInt(i/1e3/60/60/24);e("[data-flag='1']").eq(a).find("i").eq(0).text(n),e("[data-flag='1']").eq(a).find("i").eq(1).text(s),e("[data-flag='1']").eq(a).find("i").eq(2).text(l),e("[data-flag='1']").eq(a).find("i").eq(3).text(t)}},1e3),e(".group_lunbo ul").css("width",1200*Math.ceil(e(".group_lunbo ul .goods").length/3)+"px"),n=0;n<e(".group_lunbo ul .goods").length;n++)switch(n%3){case 0:e(".group_lunbo ul .goods").eq(n).css("backgroundColor","#fff6dd");break;case 1:e(".group_lunbo ul .goods").eq(n).css("backgroundColor","#ffe5e5");break;case 2:e(".group_lunbo ul .goods").eq(n).css("backgroundColor","#e3f9ff")}e(".group_lunbo ul .goods").on("mouseenter",function(){e(this).find(".slide").stop().slideDown(200)}).on("mouseleave",function(){e(this).find(".slide").stop().slideUp(200)});var g=e("<ol></ol>");for(g.appendTo(e(".group")),g.css({width:40*Math.ceil(e(".group_lunbo ul .goods").length/3)+"px",margin:"15px auto"}),n=0;n<Math.ceil(e(".group_lunbo ul .goods").length/3)-1;n++){var u=e("<li></li>");0==n?u.css({width:"30px",height:"10px",float:"left",marginLeft:"10px",backgroundColor:"#c00"}):u.css({width:"30px",height:"10px",float:"left",marginLeft:"10px",backgroundColor:"#ccc"}),u.on("click",function(){e(".group_lunbo ul").stop(),h=e(this).index()-1,m()}),g.append(u)}var h=0;function m(){++h==Math.ceil(e(".group_lunbo ul .goods").length/3-1)?(e(".group_lunbo ul").animate({left:-1200*h+"px"},1e3,function(){e(".group_lunbo ul").css("left","0px")}),h=0):e(".group_lunbo ul").animate({left:-1200*h+"px"},1e3,function(){}),g.find("li").eq(h).css("background","#c00").siblings().css("background","#ccc")}e(".group")[0].timer=setInterval(function(){m()},2e3),e(".group").on("mouseenter",function(){clearInterval(this.timer)}).on("mouseleave",function(){this.timer=setInterval(function(){m()},2e3)})}),e.ajax({url:"../server/php/choice.php",type:"post",dataType:"json",data:{class:"left_top"}}).then(function(i){for(var t=i,l=0;l<t.length;l++)e("<li>"+t[l].name+"</li>").appendTo(e(".choice .top .left .left_top ul")),e("<li><a href='#'> <img class=\"lazy\" data-original="+t[l].img+"></a></li>").appendTo(e(".choice .top .left .left_top ol"));a(),e(".choice .top .left .left_top ul li").on("mouseenter",function(){e(".choice .top .left .left_top ol li").eq(e(this).index()).css("zIndex",9).siblings().css("zIndex",0)})}),e.ajax({url:"../server/php/choice.php",type:"post",dataType:"json",data:{class:"left_bot"}}).then(function(i){for(var t=0;t<i.length;t++)e('<li><img class="lazy" data-original="'+i[t].img+'" alt=""><div><h3>'+i[t].name+"</h3><h4><p>¥"+i[t].price+'</p><a href="#" class="char">查看详情</a><p><a href="#">评测</a><a href="#">视频</a><a href="#">点评</a></p><p>电商参考价：¥'+i[t].price2+"</p></h4></div></li>").appendTo(e(".choice .top .left .left_bot ul"));a(),e(".choice .top .left .left_bot ul li").on("mouseenter",function(){e(this).find("div").stop().animate({bottom:"0",paddingTop:"50px"},300)}).on("mouseleave",function(){e(this).find("div").stop().animate({bottom:"-150px",paddingTop:"0px"},300)})}),e.ajax({url:"../server/php/choice.php",type:"post",dataType:"json",data:{class:"top_right"}}).then(function(i){for(var t=0;t<i.length;t++){var l=e('<a href="#"><img class="lazy" data-original="'+i[t].img+'" alt=""></a>');switch(t){case 0:l.addClass("right_left");break;case 1:l.addClass("right_right");break;case 2:l.addClass("right_bot")}l.appendTo(e(".choice .top .right"))}a(),e(".choice .top .right a").on("mouseenter",function(){e(this).find("img").stop().scale(1,1.1)}).on("mouseleave",function(){e(this).find("img").stop().scale(1.1,1)})}),e.ajax({url:"../server/php/brand.php",dataType:"json"}).then(function(i){for(var t=0;t<i.length;t++)e('<li><div><img class="lazy" data-original="'+i[t].img+'" alt=""></div><a href="#">'+i[t].name+"</a><p>RMB "+i[t].price+"</p></li>").appendTo(e(".brand ul"));a(),e(".brand ul li").not(e(".brand ul li:first")).on("mouseenter",function(){e(this).find("img").stop().scale(1,1.1)}).on("mouseleave",function(){e(this).find("img").stop().scale(1.1,1)})}),function(){var a=0;e(".e_Sports .content .left h2 ul li").on("click",function(){clearInterval(l),a=e(this).index(),l=setInterval(function(){t(a)}.bind(this),2e3),e(this).addClass("active").siblings().removeClass("active"),e(this).parents("h2").next(".list").find(".list_cat").eq(e(this).index()).css("zIndex",5).siblings().css("zIndex",0)}),e(".e_Sports .left .list_cat").on("mouseenter",function(){clearInterval(l)}).on("mouseleave",function(){l=setInterval(function(){t(a)},2e3)}),e.ajax({url:"../server/php/e_Sports.php",type:"post",dataType:"json",data:{class:"left"}}).then(function(a){for(var l=0;l<a.length;l++)0==a[l].class2?e('<li><a href="#"><img src="'+a[l].img+'" alt=""></a></li>').appendTo(e(".list_cat").eq(Number(a[l].class1)).find(".list_cat_top ul")):e('<li><a href="#"><img src="'+a[l].img+'" alt=""></a><a href="#">'+a[l].name+'</a><p class="price">'+a[l].price+"</p></li>").appendTo(e(".list_cat").eq(Number(a[l].class1)).find(".list_cat_bot ul"));for(var s=0;s<e(".list_cat").length;s++){for(l=0;l<e(".list_cat").eq(s).find(".list_cat_top ul li").length;l++){var n=e("<li></li>");n.appendTo(e(".list_cat").eq(s).find(".list_cat_top ol")),0==l&&n.addClass("active"),n.on("click",function(){i=e(this).index()-1,t(e(this).parents(".list_cat").index())})}e(".list_cat").eq(s).find(".list_cat_top ol").css({width:20*e(".list_cat").eq(s).find(".list_cat_top ul li").length+"px",marginLeft:20*e(".list_cat").eq(s).find(".list_cat_top ul li").length/2*-1+"px"}),e(".list_cat").eq(s).find(".list_cat_top ul li").eq(0).clone().appendTo(e(".list_cat").eq(s).find(".list_cat_top ul")),e(".list_cat").eq(s).find(".list_cat_top ul").css({width:594*e(".list_cat").eq(s).find(".list_cat_top ul li").length+"px"})}});var i=0;function t(a){++i>=e(".list_cat").eq(a).find(".list_cat_top ul li").length-1?(e(".list_cat").eq(a).find(".list_cat_top ul").animate({left:-594*i},function(){e(".list_cat").eq(a).find(".list_cat_top ul").css("left",0)}),i=0):e(".list_cat").eq(a).find(".list_cat_top ul").animate({left:-594*i}),e(".list_cat").eq(a).find(".list_cat_top ol li").eq(i).addClass("active").siblings().removeClass("active")}var l=setInterval(function(){t(0)},2e3)}(),e.ajax({url:"../server/php/e_Sports.php",type:"post",dataType:"json",data:{class:"right"}}).then(function(a){for(var i=0;i<a.length;i++)e("<li><a href='' ><img src='"+a[i].img+"'></a><a href='#'>"+a[i].name+"</a><p>"+a[i].price+"</p> </li>").appendTo(e(".e_Sports .right .content ul"))}),e(window).scrollTop()>=500&&e(".search1 .logo img").attr("src","images/img/logo_fixed1.png"),e(window).on("scroll",function(){e(window).scrollTop()>=500?(e(".search1 .logo img").attr("src","images/img/logo_fixed1.png"),e(".search1").css({position:"fixed",top:0,left:"50%",marginLeft:-1*e(".search1").width()/2}),e("nav").css({paddingTop:"90px"})):(e(".search1 .logo img").attr("src","images/img/2018logo_130x60.gif"),e(".search1").css({position:"static",marginLeft:0}),e("nav").css({paddingTop:"30px"}))})})})});